<html>
    <head>
        <script type="text/javascript" src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
        <!-- Compiled and minified CSS -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-alpha.4/css/materialize.min.css">
   
        <!-- Compiled and minified JavaScript -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-alpha.4/js/materialize.min.js"></script>
        <script src="https://use.fontawesome.com/64b4715cd6.js"></script>
        <script src="//cdn.quilljs.com/1.3.6/quill.js"></script>
        <script src="//cdn.quilljs.com/1.3.6/quill.min.js"></script>  
        <link href="//cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
        <link href="//cdn.quilljs.com/1.3.6/quill.bubble.css" rel="stylesheet">
        {%load static %}
        <link rel="stylesheet" type="text/css" href="{% static 'posts/style3.css' %}">
       
        <link rel="stylesheet" type="text/css" href="{% static 'posts/style.css' %}"/>
        
        <link rel="stylesheet" type="text/css" href="{% static 'posts/style1.css' %}"/>
        <link rel="stylesheet" type="text/css" href="{% static 'posts/style5.css' %}"/>
    </head>
    <body>
        {% include 'posts/base.html' %}
        <main>
        <div class="cover">
            
            <img class="cp" src="/static/posts/images/default-bigcover.jpg" width="851px" height="315px">
        </div>
        <div class="profile_pic">
            {% if user.profile.profile_pic %}
            <img class="pp" src="{{user.profile.profile_pic.url}}"  width="168px" height="168px">    
            {% else %}
                <img class="pp" src="/static/posts/images/blank-profile-picture-973460_640.png" width="168px" height="168px">
            {% endif %}
        </div>
        <div class="bio">
            <div class="bio_title"><span><i class="fa fa-globe" aria-hidden="true"></i></span>Intro</div>
        </div>

        {% if all_blogs %}
        <div class="all_blogs">
        {% for blog in all_blogs %}
            
            <div class="contents">
                    <div class="title"><span><i class="fa fa-user-circle-o" aria-hidden="true"></i></span>{{ blog.title }}</div>
                <div class="blog-details">
                    <ul>
                        <li><span><i class="fa fa-pencil" aria-hidden="true"></i></span> : {{ blog.author }}</li>
                        <li><span><i class="fa fa-tag" aria-hidden="true"></i></span> : {{ blog.topic }}</li>
                        <li><span><i class="fa fa-calendar-plus-o" aria-hidden="true"></i></span> : {{ blog.published_date }}</li>
                        <li><span><i class="fa fa-eye" aria-hidden="true"></i></span> :  {{ blog.views }}</li>
                    </ul> 
                </div>
                <div id="toolbar"></div>
                <div class="info" id="editor{{forloop.counter}}"></div>
                <a class="waves-effect waves-light btn-large more" href="{%url 'posts:descriptions' blog.topic.id blog.id %}">READ MORE</a>
            </div>
        {% endfor %}
    </div>
    {% endif %}
    <div id="editor" style="visibility:hidden;display:none"></div>
    </main>
        {% include 'posts/footer.html' %}
    
    <script>
        var quill = new Quill('#editor',{
            modules:{
                toolbar:false
            },
            theme:'bubble'
        });
        var blogs = jQuery.parseJSON( "{{ pair | escapejs}}" ); 
        console.log(blogs);
        var count = Object.keys(blogs).length; 
        console.log(count); 
        for(i=0;i<count;i++){
            if(blogs[i]==""){
                continue;
            }
            var y=$.parseJSON(blogs[i]);
            quill.setContents(y);
            $('#editor'+(i+1)).html(quill.root.innerHTML.substring(0,300)+"...");
        }
    </script>
</body>
</html>